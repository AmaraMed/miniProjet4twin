
<div class="container mydiv " *ngIf="getUserType()=='MODERATEUR'">
<br>
<button class="btn btn-outline-primary" (click)="showForm()">{{buttonValue}}</button>
<div *ngIf="showFormTemplate">
  <app-form-code-promo (addEvent)="saveCodePromo($event)" [updateCodePromo]="inputcode"></app-form-code-promo>
</div>

<div *ngIf="!showFormTemplate">
<div class="form-group"  [formGroup]="f" >
</div>
<div  class="container">
  <input type="text" class="form-control" id="search-text" aria-describedby="search-text"
         [(ngModel)]="searchTerm" (input)="search()"  placeholder="Enter text to search"
         autofocus>

</div>
<div class="container">
   <div class="table-responsive-xl">
    <table class="table table-striped " >
      <thead class=""> <!-- bg-primary -->
      <tr>
        <th  scope="col" class="text-center "(click)="sort('id')" >Identifiant   &nbsp; <i class="fa fa-sort"></i> </th>
        <th scope="col" class="text-center ">Cle promo</th>
        <th  scope="col" class="text-center " (click)="sort('dateFin')">Date fin  &nbsp; <i class="fa fa-sort"></i> </th>
        <th  scope="col" class="text-center " (click)="sort('valeur')">Valeur &nbsp; <i class="fa fa-sort"></i></th>
        <th  scope="col" class="text-center ">Désactiver</th>
        <th  scope="col" class="text-center ">Mise à jour</th>
        <th  scope="col" class="text-center ">Génerer QrCode</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let code of codes | orderBy: key: reverse| paginate :{itemsPerPage:5, currentPage:p} ;">
        <td  scope="col" class="text-center ">{{code.idCodePomo}}</td>
        <td  scope="col" class="text-center ">{{code.cle}}</td>
        <td  scope="col" class="text-center ">{{code.dateFin| date:'yyyy-MM-dd hh:mm'}}</td>
        <td  scope="col" class="text-center ">{{code.valeur}}%</td>
        <td  scope="col" class="text-center "><button class="btn btn-outline-danger" (click)="deleteCode(code)" ><i class="fas fa-times-circle"></i></button></td>
        <td  scope="col" class="text-center "><button class="btn btn-outline-success" (click)="updateCode(code)"><i class="fas fa-edit"></i></button></td>
        <td  scope="col" class="text-center "><button class="btn btn-outline-secondary" (click)="genererQrCode(code)"><i class="fa fa-qrcode" aria-hidden="true"></i></button></td>

      </tr>
      </tbody>
      <pagination-controls (pageChange)="p = $event"> </pagination-controls>
    </table>
  </div>
</div>
<ngx-qrcode
  [elementType]="elementType"
  [errorCorrectionLevel]="correctionLevel"
  [value]="value" [colorDark]="blueColor"
  cssClass="bshadow"></ngx-qrcode>
<!--<textarea [(ngModel)] = "value"></textarea>-->
  <div class="container mydiv ">

  </div>
</div>
</div>
<div class="container mydiv " *ngIf="getUserType()!='MODERATEUR'">

<!--
  <div class="card ticket "  *ngFor="let code of codes " >
    <div class="ticket-content-wrapper">
      <svg
        width="650"
        height="320"
        viewBox="0 0 666 326"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M663 131.004L662.962 133.503C663.632 133.514 664.277 133.255 664.754 132.785C665.231 132.315 665.5 131.673 665.5 131.004H663ZM663 195.996H665.5C665.5 195.327 665.231 194.685 664.754 194.215C664.277 193.745 663.632 193.486 662.962 193.497L663 195.996ZM3 195.996L3.0376 193.497C2.36812 193.486 1.72257 193.745 1.24558 194.215C0.768581 194.685 0.5 195.327 0.5 195.996H3ZM3 131.004H0.5C0.5 131.673 0.768581 132.315 1.24558 132.785C1.72257 133.255 2.36812 133.514 3.0376 133.503L3 131.004ZM23 0.5C10.5736 0.5 0.5 10.5736 0.5 23H5.5C5.5 13.335 13.335 5.5 23 5.5V0.5ZM643 0.5H23V5.5H643V0.5ZM665.5 23C665.5 10.5736 655.426 0.5 643 0.5V5.5C652.665 5.5 660.5 13.335 660.5 23H665.5ZM665.5 131.004V23H660.5V131.004H665.5ZM662.5 133.5C662.654 133.5 662.808 133.501 662.962 133.503L663.038 128.504C662.859 128.501 662.68 128.5 662.5 128.5V133.5ZM632.5 163.5C632.5 146.931 645.931 133.5 662.5 133.5V128.5C643.17 128.5 627.5 144.17 627.5 163.5H632.5ZM662.5 193.5C645.931 193.5 632.5 180.069 632.5 163.5H627.5C627.5 182.83 643.17 198.5 662.5 198.5V193.5ZM662.962 193.497C662.808 193.499 662.654 193.5 662.5 193.5V198.5C662.68 198.5 662.859 198.499 663.038 198.496L662.962 193.497ZM665.5 303V195.996H660.5V303H665.5ZM643 325.5C655.426 325.5 665.5 315.426 665.5 303H660.5C660.5 312.665 652.665 320.5 643 320.5V325.5ZM23 325.5H643V320.5H23V325.5ZM0.5 303C0.5 315.426 10.5736 325.5 23 325.5V320.5C13.335 320.5 5.5 312.665 5.5 303H0.5ZM0.5 195.996V303H5.5V195.996H0.5ZM3.5 193.5C3.34568 193.5 3.19154 193.499 3.0376 193.497L2.9624 198.496C3.14119 198.499 3.32039 198.5 3.5 198.5V193.5ZM33.5 163.5C33.5 180.069 20.0685 193.5 3.5 193.5V198.5C22.83 198.5 38.5 182.83 38.5 163.5H33.5ZM3.5 133.5C20.0685 133.5 33.5 146.931 33.5 163.5H38.5C38.5 144.17 22.83 128.5 3.5 128.5V133.5ZM3.0376 133.503C3.19154 133.501 3.34568 133.5 3.5 133.5V128.5C3.32039 128.5 3.14119 128.501 2.9624 128.504L3.0376 133.503ZM0.5 23V131.004H5.5V23H0.5Z"
          fill="url(#paint0_linear)"
        />
        <defs>
          <linearGradient
            id="paint0_linear"
            x1="3"
            y1="158"
            x2="653"
            y2="163"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#D25778" />
            <stop offset="0.354167" stop-color="#EC585C" />
            <stop offset="0.729167" stop-color="#E7D155" />
            <stop offset="1" stop-color="#56A8C6" />
          </linearGradient>
        </defs>

      </svg>
    </div>
  </div>
-->



<!--
    <section class="container" >
      <h1>Code Promo</h1>
      <div class="column" >
        <div class="">
        <article class="card fl-right"  *ngFor="let code of codes " >
          <section class="date">
            <time>
              <span style="font-size:18px">{{code.dateFin| date}}</span>
            </time>
          </section>
          <section class="card-cont">
            <h3>{{code.cle}}</h3>
            <div class="even-date">
              <i class="fa fa-calendar"></i>
              <time>
                <span>{{code.dateFin| date:'fullDate'}}</span>
                <span> {{code.dateFin| date:'hh:mm'}} </span>
              </time>
            </div>
            <a href="#">Utiliser </a>
          </section>
        </article>
        </div>
      </div>
    </section>
-->
  <!-- Carousel wrapper -->
  <div
    id="carouselBasicExample"
    class="carousel slide carousel-fade"
    data-mdb-ride="carousel"
  >
    <!-- Indicators -->
    <div class="carousel-indicators">
      <button
        type="button"
        data-mdb-target="#carouselBasicExample"
        data-mdb-slide-to="0"
        class="active"
        aria-current="true"
        aria-label="Slide 1"
      ></button>
      <button
        type="button"
        data-mdb-target="#carouselBasicExample"
        data-mdb-slide-to="1"
        aria-label="Slide 2"
      ></button>
      <button
        type="button"
        data-mdb-target="#carouselBasicExample"
        data-mdb-slide-to="2"
        aria-label="Slide 3"
      ></button>
    </div>

    <!-- Inner -->
    <div class="carousel-inner"  >
      <!-- Single item -->
      <div class="carousel-item ">
        <img
          src="assets/img/codepromo.jpg"
          class="d-block w-100"
          alt="..."
        />

      </div>
      <div class="carousel-item active " *ngFor="let code of codes " >
        <img
          src="assets/img/codepromo.jpg"
          class="d-block w-100"
          alt="..."
        />
        <div class="carousel-caption d-none d-md-block">

          <h5>{{code.cle}}</h5>
          <p>
            {{ code.valeur }}% jusqu'à le {{code.dateFin | date}}
          </p>
        </div>
      </div>

    </div>
    <!-- Inner -->

    <!-- Controls -->
    <button
      class="carousel-control-prev"
      type="button"
      data-mdb-target="#carouselBasicExample"
      data-mdb-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-mdb-target="#carouselBasicExample"
      data-mdb-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="card-body">
    <form>
      <div class="form-group"> <label>Code offre ?</label>
        <div class="input-group"> <input type="text" class="form-control coupon" name="" placeholder="Entrez votre code offre "> <span class="input-group-append"> <button class="btn btn-primary btn-apply coupon">Utiliser</button> </span> </div>
      </div>
    </form>
  </div>


<!--

  <div class="" >

<button class="btn-outline-primary"  (click)="sort('dateFin')" ><i class="fa fa-sort"></i> Fitrer </button>
    <div class=" card-columns" >
  <div class="card " *ngFor="let code of codes " >
    <div data-ng-if=" scope < code.dateFin">
    <div class="ticket--center">
      <div class="ticket--center--row">
        <div class="ticket--center--col">

          <strong>{{code.cle}}</strong>
        </div>
      </div>
      <div class="ticket--center--row">
        <div class="ticket--center--col">
          <span class="ticket--info--title">Date and time</span>
          <span class="ticket--info--subtitle">{{code.dateFin| date:'fullDate'}}</span>
          <span class="ticket--info--content"> {{code.dateFin| date:'hh:mm'}} </span>
        </div>
      </div>
    </div>
    <div class="ticket--end">
      <div (play)="genererQrCode(code)">  <ngx-qrcode
        [elementType]="elementType"
        [errorCorrectionLevel]="correctionLevel"
        [value]="value" [colorDark]="blueColor"
        cssClass="bshadow"></ngx-qrcode> </div>
    </div>
  </div>
    </div>
  </div>
  </div>
  -->
</div>
